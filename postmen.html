<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- 連結Bootstrap -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <!-- 連結Smtpjs -->
    <script src="https://smtpjs.com/v3/smtp.js"></script>
    <!-- 連結Style.css -->
    <link rel="stylesheet" href="./css/postmen.css">
    <link rel="stylesheet" href="../css/layout-navigator.CSS">
    <script src="../JavaScropt&Jquery/nav.js"></script>
    <!--title -->
    <title>來 信 意 見</title>
    <link rel="icon" href="./img/logo121.ico" type="image/x-icon">
</head>

<body>

    <div id="nav"></div>

    <!-- 信箱設定 -->
    <script type="text/javascript">
        var re = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;

        function sendMail() {
            let fields = {
                name: document.querySelector("#name").value,
                opinion: document.querySelector("#opinion").value,
                mail: document.querySelector("#mail").value,
            };
            // 必須填的格式
            if (fields.name.length == 0) {
                alert('姓名必填');
                return;
            }
            if (fields.mail.length == 0) {
                alert('信箱必填');
                return;
            }

            if (fields.opinion.length == 0) {
                alert('意見必填');
                return;

                var send = re.exec(mail.value);
                if (!send) {
                    window.alert('請輸入信件格式');
                    return
                } else(!send)
                window.alert('感謝您寶貴的意見!' + send[0]);


            }
            let body = '姓名：' + fields.name + '<br>' + '信箱：' + fields.mail + '<br>' + fields.opinion + '<br>';
            Email.send({
                SecureToken: "4366270a5fa57628d47fe3e8488de630",
                Host: "smtp.mailtrap.io",
                Password: "702eebacfd8012",
                Username: "850d926a49474e",
                To: '09f2b6b628-33bf8b@inbox.mailtrap.io',
                From: "09f2b6b628-33bf8b@inbox.mailtrap.io",
                Subject: "未來之戰百科的意見",
                Body: body,
            }).then(
                message => alert(message)
            );
        }
    </script>

    <!-- ===============來信意見框架=============== -->
    <section>
        <form method="post">
            <input type="text" id="name" placeholder="姓名">
            <input type="text" id="mail" placeholder="您的信箱">
            <input type="button" id="send" value="送信" onclick="sendMail()">
            <br>
            <textarea id="opinion" rows="2" name="S1" cols="20" placeholder="希望您留下寶貴且理性的意見"></textarea>
            <br><br>
        </form>
    </section>

</body>

</html>